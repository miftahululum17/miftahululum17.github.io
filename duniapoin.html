<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUNIA POIN V.1.0</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .announcement, .stats {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            text-align: center;
            font-size: 1rem;
            color: #fff;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        /* Media Queries */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            button {
                font-size: 1rem;
                padding: 12px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .announcement, .stats {
                font-size: 0.9rem;
                padding: 10px;
            }

            button {
                font-size: 0.9rem;
                padding: 10px;
            }
        }

        .stats {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .stats div {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .stats div span {
            font-weight: bold;
            color: #ffdd57;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.7;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        button:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #ad-container {
            margin-top: 20px;
            text-align: center;
        }

        /* Formulir Penarikan Poin */
        .withdrawal-form {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            z-index: 1000;
        }

        .withdrawal-form h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .withdrawal-form label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .withdrawal-form input,
        .withdrawal-form select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
        }

        .withdrawal-form .form-buttons {
            display: flex;
            justify-content: space-between;
        }

        .withdrawal-form .form-buttons button {
            width: 48%;
            margin: 0;
        }

        .withdrawal-form .error-message {
            color: red;
            font-size: 0.9rem;
            margin-top: -10px;
            margin-bottom: 10px;
            display: none;
        }

        /* Riwayat Penarikan */
        .history {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            z-index: 1000;
            max-height: 80vh;
            overflow-y: auto;
        }

        .history h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .history ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .history ul li {
            background: rgba(0, 0, 0, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            color: #333;
        }

        .history .history-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .history .history-buttons button {
            width: 48%;
            margin: 0;
        }

        /* Overlay */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* Toast Notification - DIPERBAIKI */
        .toast {
            visibility: hidden;
            min-width: 250px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 10px;
            padding: 16px;
            position: fixed;
            z-index: 1001;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .toast.show {
            visibility: visible;
            opacity: 1;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            margin: 10px 0;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Tombol Pop Up Ads */
        .popup-ad-button {
            background: linear-gradient(135deg, #4facfe, #00f2fe) !important;
        }
    </style>
  
    <link rel="me" href="https://www.blogger.com/profile/10714673759555295146" />
    <meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
    <meta name='google-adsense-platform-domain' content='blogspot.com'/>
</head>
<body>
    <div class="container">
        <h1>DUNIA POIN V.1.0</h1>
        <strong>Powered By: supermin</strong>
        
        <!-- Pengumuman -->
        <div class="announcement">
            <strong>🎉 Pengumuman:</strong> Selamat datang di DUNIA POIN V.1.0
        </div>

        <!-- Statistik Iklan dan Poin -->
        <div class="stats">
            <div class="ads-today">📊 Iklan yang dilihat hari ini: <span id="adsToday">0</span>/<span id="dailyAdLimit">100</span></div>
            <div class="total-ads">📈 Total iklan yang dilihat: <span id="totalAds">0</span></div>
            <div class="points">💰 Poin Anda: <span id="points">0</span></div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Memuat iklan...</p>
        </div>

        <!-- Tombol untuk melihat iklan -->
        <button id="watchAdButton" onclick="startAd()">🎬 TONTON IKLAN (+5 Poin)</button>

        <!-- Tombol View Pop Up Ads -->
        <button id="popupAdButton" class="popup-ad-button" onclick="startPopupAd()">🪟 VIEW POP UP ADS (+5 Poin)</button>

        <!-- Tombol Penarikan Poin -->
        <button id="withdrawButton" onclick="showWithdrawalForm()">💳 Penarikan Poin</button>

        <!-- Tombol Riwayat Penarikan -->
        <button id="historyButton" onclick="showHistory()">📜 Riwayat Penarikan</button>

        <!-- Tombol Group Telegram Baru -->
        <button onclick="openTelegramChannel()">📢 Status Pembayaran</button>

        <!-- Container untuk menampilkan iklan -->
        <div id="ad-container">
            <!-- Iklan akan ditampilkan di sini -->
        </div>
    </div>

    <!-- Formulir Penarikan Poin -->
    <div class="overlay" id="overlay" onclick="hideWithdrawalForm()"></div>
    <div class="withdrawal-form" id="withdrawalForm">
        <h2>Formulir Penarikan Poin</h2>
        <form id="withdrawalFormContent">
            <label for="name">Nama:</label>
            <input type="text" id="name" required>

            <label for="pointsToWithdraw">Poin yang Ditukar:</label>
            <input type="number" id="pointsToWithdraw" required oninput="checkMinWithdrawal()">
            <div id="minWithdrawalMessage" class="error-message">Minimal penarikan adalah 5000 poin.</div>

            <label for="paymentMethod">Metode Pembayaran:</label>
            <select id="paymentMethod" required>
                <option value="DANA">DANA (potongan 100/penarikan)</option>
                <!-- <option value="SHOPEE">SHOPEE (potongan 100/penarikan)</option> -->
            </select>

            <label for="phoneNumber">Nomor HP Pembayaran:</label>
            <input type="text" id="phoneNumber" required>

            <label for="date">Tanggal:</label>
            <input type="text" id="date" value="" readonly>

            <div class="form-buttons">
                <button type="button" onclick="submitWithdrawal()">Kirim</button>
                <button type="button" onclick="hideWithdrawalForm()">Batal</button>
            </div>
        </form>
    </div>

    <!-- Riwayat Penarikan -->
    <div class="history" id="history">
        <h2>Riwayat Penarikan</h2>
        <ul id="historyList"></ul>
        <div class="history-buttons">
            <button type="button" onclick="deleteHistory()">🗑️ Hapus Riwayat</button>
            <button type="button" onclick="hideHistory()">❌ Tutup</button>
        </div>
    </div>

    <!-- Pesan mengambang (toast) -->
    <div id="toast" class="toast"></div>

    <!-- Skrip SDK Baru -->
    <script src='//libtl.com/sdk.js' data-zone='9865183' data-sdk='show_9865183'></script>

    <script>
        // Data simulasi
        let adsToday = 0;
        const dailyAdLimit = 100;
        let totalAds = 0;
        let points = 0;
        let isAdButtonDisabled = false;
        const minWithdrawal = 1000;

        // Token dan Chat ID Admin Telegram
        const botToken = '7035581953:AAGinoLxWqPTJ6odVATZxQj6kRvCEpTk9OI';
        const adminChatId = '306327811';

        // Variabel untuk mengelola status tombol secara bergantian
        let activeButton = null;
        let countdownInterval = null;

        // Fungsi untuk menampilkan pesan mengambang
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // Fungsi untuk menampilkan/menyembunyikan loading
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        // Fungsi untuk menyimpan data ke local storage
        function saveData() {
            localStorage.setItem('adsToday', adsToday);
            localStorage.setItem('totalAds', totalAds);
            localStorage.setItem('points', points);
            localStorage.setItem('lastResetDate', new Date().toLocaleDateString());
        }

        // Fungsi untuk memuat data dari local storage
        function loadData() {
            const lastResetDate = localStorage.getItem('lastResetDate');
            const currentDate = new Date().toLocaleDateString();

            if (lastResetDate !== currentDate) {
                localStorage.setItem('adsToday', 0);
                localStorage.setItem('lastResetDate', currentDate);
            }

            adsToday = parseInt(localStorage.getItem('adsToday')) || 0;
            totalAds = parseInt(localStorage.getItem('totalAds')) || 0;
            points = parseInt(localStorage.getItem('points')) || 0;

            updateDisplay();
        }

        // Fungsi untuk update tampilan
        function updateDisplay() {
            document.getElementById('adsToday').innerText = adsToday;
            document.getElementById('dailyAdLimit').innerText = dailyAdLimit;
            document.getElementById('totalAds').innerText = totalAds;
            document.getElementById('points').innerText = points;

            // Update status tombol berdasarkan batas harian
            const watchButton = document.getElementById('watchAdButton');
            const popupButton = document.getElementById('popupAdButton');
            
            if (adsToday >= dailyAdLimit) {
                watchButton.disabled = true;
                watchButton.innerText = "Batas Iklan Hari Ini Terpenuhi";
                popupButton.disabled = true;
                popupButton.innerText = "Batas Iklan Hari Ini Terpenuhi";
            } else {
                // Reset tombol ke state normal jika belum mencapai batas
                if (!countdownInterval) {
                    watchButton.disabled = false;
                    watchButton.innerText = "🎬 TONTON IKLAN (+5 Poin)";
                    popupButton.disabled = false;
                    popupButton.innerText = "🪟 VIEW POP UP ADS (+5 Poin)";
                }
            }
        }

        // Fungsi untuk menampilkan formulir penarikan poin
        function showWithdrawalForm() {
            document.getElementById('withdrawalForm').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('date').value = new Date().toLocaleDateString();
        }

        // Fungsi untuk menyembunyikan formulir penarikan poin
        function hideWithdrawalForm() {
            document.getElementById('withdrawalForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            resetWithdrawalForm();
        }

        // Fungsi untuk mereset formulir penarikan poin
        function resetWithdrawalForm() {
            document.getElementById('withdrawalFormContent').reset();
            document.getElementById('date').value = new Date().toLocaleDateString();
            document.getElementById('minWithdrawalMessage').style.display = 'none';
        }

        // Fungsi untuk memeriksa batasan minimal penarikan
        function checkMinWithdrawal() {
            const pointsToWithdraw = document.getElementById('pointsToWithdraw').value;
            const minWithdrawalMessage = document.getElementById('minWithdrawalMessage');

            if (parseInt(pointsToWithdraw) < minWithdrawal) {
                minWithdrawalMessage.style.display = 'block';
            } else {
                minWithdrawalMessage.style.display = 'none';
            }
        }

        // Fungsi untuk mengirim formulir penarikan poin
        async function submitWithdrawal() {
            const name = document.getElementById('name').value;
            const pointsToWithdraw = document.getElementById('pointsToWithdraw').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const date = document.getElementById('date').value;

            if (!name || !pointsToWithdraw || !paymentMethod || !phoneNumber) {
                showToast("Harap isi semua field!", 3000);
                return;
            }

            if (parseInt(pointsToWithdraw) < minWithdrawal) {
                showToast(`Minimal penarikan adalah ${minWithdrawal} poin.`, 3000);
                return;
            }

            if (parseInt(pointsToWithdraw) > points) {
                showToast("Poin yang diminta melebihi poin yang Anda miliki!", 3000);
                return;
            }

            const message = `📝 *Permintaan Penarikan Poin V.1*:\n\n` +
                `Nama: ${name}\n` +
                `Poin yang Ditukar: ${pointsToWithdraw}\n` +
                `Metode Pembayaran: ${paymentMethod}\n` +
                `Nomor HP Pembayaran: ${phoneNumber}\n` +
                `Tanggal: ${date}`;

            try {
                showLoading(true);
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: adminChatId,
                        text: message,
                        parse_mode: 'Markdown',
                    }),
                });

                const data = await response.json();

                if (data.ok) {
                    points -= parseInt(pointsToWithdraw);
                    saveData();
                    updateDisplay();
                    saveWithdrawalHistory(name, pointsToWithdraw, paymentMethod, phoneNumber, date);
                    showToast("Permintaan penarikan poin berhasil dikirim ke admin.", 3000);
                } else {
                    showToast("Gagal mengirim permintaan penarikan poin. Silakan coba lagi.", 3000);
                }
            } catch (error) {
                console.error('Error:', error);
                showToast("Terjadi kesalahan. Silakan coba lagi.", 3000);
            } finally {
                showLoading(false);
            }

            resetWithdrawalForm();
            hideWithdrawalForm();
        }

        // Fungsi untuk menyimpan riwayat penarikan
        function saveWithdrawalHistory(name, pointsToWithdraw, paymentMethod, phoneNumber, date) {
            const history = JSON.parse(localStorage.getItem('withdrawalHistory')) || [];
            history.push({ name, pointsToWithdraw, paymentMethod, phoneNumber, date });
            localStorage.setItem('withdrawalHistory', JSON.stringify(history));
        }

        // Fungsi untuk menampilkan riwayat penarikan
        function showHistory() {
            const history = JSON.parse(localStorage.getItem('withdrawalHistory')) || [];
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';

            if (history.length === 0) {
                historyList.innerHTML = '<li>Tidak ada riwayat penarikan.</li>';
            } else {
                history.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <strong>${index + 1}. ${item.name}</strong><br>
                        Poin: ${item.pointsToWithdraw}<br>
                        Metode: ${item.paymentMethod}<br>
                        Nomor HP: ${item.phoneNumber}<br>
                        Tanggal: ${item.date}
                    `;
                    historyList.appendChild(li);
                });
            }

            document.getElementById('history').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // Fungsi untuk menyembunyikan riwayat penarikan
        function hideHistory() {
            document.getElementById('history').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Fungsi untuk menghapus riwayat penarikan
        function deleteHistory() {
            if (confirm("Apakah Anda yakin ingin menghapus semua riwayat penarikan?")) {
                localStorage.removeItem('withdrawalHistory');
                showHistory();
                showToast("Riwayat penarikan berhasil dihapus.", 3000);
            }
        }

        // Fungsi untuk membuka grup Telegram
        function openTelegramChannel() {
            const telegramGroupLink = 'https://t.me/statuspembayaran';
            window.open(telegramGroupLink, '_blank');
        }

        // Fungsi untuk memulai iklan biasa
        function startAd() {
            if (adsToday >= dailyAdLimit) {
                showToast("Anda telah mencapai batas iklan hari ini.", 3000);
                return;
            }

            if (!checkInternetConnection()) {
                showToast("Tidak ada koneksi internet. Periksa koneksi Anda.", 3000);
                return;
            }

            activeButton = 'watch';
            disableOtherButtons();
            showLoading(true);
            
            // Gunakan SDK untuk iklan biasa
            try {
                if (typeof window.show_9865183 === 'function') {
                    window.show_9865183();
                    // Simulasi callback setelah 5 detik
                    setTimeout(() => {
                        onAdComplete();
                    }, 5000);
                } else {
                    throw new Error('SDK tidak tersedia');
                }
            } catch (error) {
                console.error('Error loading ad:', error);
                showToast("Iklan tidak dapat dimuat. Silakan coba lagi.", 3000);
                enableAllButtons();
                showLoading(false);
            }
        }

        // Fungsi untuk memulai popup ads
        function startPopupAd() {
            if (adsToday >= dailyAdLimit) {
                showToast("Anda telah mencapai batas iklan hari ini.", 3000);
                return;
            }

            if (!checkInternetConnection()) {
                showToast("Tidak ada koneksi internet. Periksa koneksi Anda.", 3000);
                return;
            }

            activeButton = 'popup';
            disableOtherButtons();
            showLoading(true);
            
            // Gunakan SDK untuk popup ads dengan format rewarded
            try {
                if (typeof window.show_9865183 === 'function') {
                    show_9865183('pop').then(() => {
                        // User menonton iklan sampai selesai
                        onAdComplete();
                    }).catch(e => {
                        // User menutup iklan atau terjadi error
                        console.error('Popup ad error:', e);
                        showToast("Iklan popup ditutup atau gagal dimuat.", 3000);
                        enableAllButtons();
                        showLoading(false);
                    });
                } else {
                    throw new Error('SDK tidak tersedia');
                }
            } catch (error) {
                console.error('Error loading popup ad:', error);
                showToast("Iklan popup tidak dapat dimuat. Silakan coba lagi.", 3000);
                enableAllButtons();
                showLoading(false);
            }
        }

        // Fungsi ketika iklan selesai
        function onAdComplete() {
            if (!checkInternetConnection()) {
                showToast("⚠️ Koneksi internet terputus! Poin tidak tersimpan.", 5000);
                enableAllButtons();
                showLoading(false);
                return;
            }

            adsToday++;
            totalAds++;
            points += 5; // DIUBAH: dari 15 menjadi 5 poin per iklan

            saveData();
            updateDisplay();
            showLoading(false);

            showToast("🎉 Terima kasih! Anda mendapatkan 5 poin.", 5000);

            if (adsToday >= dailyAdLimit) {
                disableAllButtons();
                document.getElementById('watchAdButton').innerText = "Batas Iklan Hari Ini Terpenuhi";
                document.getElementById('popupAdButton').innerText = "Batas Iklan Hari Ini Terpenuhi";
            } else {
                startCountdown(10);
            }
        }

        // Fungsi untuk memeriksa koneksi internet
        function checkInternetConnection() {
            return navigator.onLine;
        }

        // Fungsi untuk menonaktifkan tombol lain (hanya aktifkan tombol yang sedang digunakan)
        function disableOtherButtons() {
            const watchButton = document.getElementById('watchAdButton');
            const popupButton = document.getElementById('popupAdButton');
            
            if (activeButton === 'watch') {
                watchButton.disabled = false;
                watchButton.innerText = "Memuat Iklan...";
                popupButton.disabled = true;
            } else if (activeButton === 'popup') {
                popupButton.disabled = false;
                popupButton.innerText = "Memuat Iklan...";
                watchButton.disabled = true;
            }
        }

        // Fungsi untuk mengaktifkan semua tombol
        function enableAllButtons() {
            const watchButton = document.getElementById('watchAdButton');
            const popupButton = document.getElementById('popupAdButton');
            
            watchButton.disabled = false;
            watchButton.innerText = "🎬 TONTON IKLAN (+5 Poin)";
            popupButton.disabled = false;
            popupButton.innerText = "🪟 VIEW POP UP ADS (+5 Poin)";
            activeButton = null;
        }

        // Fungsi untuk menonaktifkan semua tombol
        function disableAllButtons() {
            const watchButton = document.getElementById('watchAdButton');
            const popupButton = document.getElementById('popupAdButton');
            
            watchButton.disabled = true;
            popupButton.disabled = true;
        }

        // Fungsi untuk hitungan mundur - BERUBAH: hanya berlaku untuk tombol yang aktif
        function startCountdown(seconds) {
            const watchButton = document.getElementById('watchAdButton');
            const popupButton = document.getElementById('popupAdButton');
            
            let countdown = seconds;

            // Hanya nonaktifkan tombol yang sedang tidak aktif
            if (activeButton === 'watch') {
                popupButton.disabled = true;
            } else if (activeButton === 'popup') {
                watchButton.disabled = true;
            }

            countdownInterval = setInterval(() => {
                // Update teks hanya pada tombol yang aktif
                if (activeButton === 'watch') {
                    watchButton.innerText = `Tunggu ${countdown} detik...`;
                } else if (activeButton === 'popup') {
                    popupButton.innerText = `Tunggu ${countdown} detik...`;
                }
                
                countdown--;

                if (countdown < 0) {
                    clearInterval(countdownInterval);
                    countdownInterval = null;
                    enableAllButtons();
                }
            }, 1000);
        }

        // Deteksi perubahan status koneksi internet
        window.addEventListener('online', () => {
            showToast("Koneksi internet kembali.", 3000);
        });

        window.addEventListener('offline', () => {
            showToast("⚠️ Koneksi internet terputus!", 3000);
        });

        // Fungsi untuk mendeteksi sistem operasi
        function detectOS() {
            const userAgent = window.navigator.userAgent;
            const platform = window.navigator.platform;
            const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];
            const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];
            const iosPlatforms = ['iPhone', 'iPad', 'iPod'];

            if (macosPlatforms.indexOf(platform) !== -1) {
                return 'Mac OS';
            } else if (iosPlatforms.indexOf(platform) !== -1) {
                return 'iOS';
            } else if (windowsPlatforms.indexOf(platform) !== -1) {
                return 'Windows';
            } else if (/Android/.test(userAgent)) {
                return 'Android';
            } else if (/Linux/.test(platform)) {
                return 'Linux';
            }

            return 'Unknown OS';
        }

        // Fungsi untuk mendeteksi emulator
        function isEmulator() {
            const userAgent = navigator.userAgent;
            const isEmulator = /emulator/i.test(userAgent) || /Android SDK built for x86/i.test(userAgent);
            return isEmulator;
        }

        // Fungsi untuk mendeteksi Telegram Web
        function isTelegramWeb() {
            const userAgent = navigator.userAgent;
            const isTelegramWeb = /TelegramWeb/i.test(userAgent);
            return isTelegramWeb;
        }

        // Inisialisasi
        function init() {
            // Cek OS dan blokir jika bukan Android
            const allowedOS = 'Android';
            const detectedOS = detectOS();

            if (detectedOS !== allowedOS) {
                document.body.innerHTML = '<div style="text-align: center; padding: 50px; color: white;"><h1>Akses Ditolak</h1><p>Hanya perangkat Android yang diizinkan mengakses halaman ini.</p></div>';
                return;
            }

            // Cek emulator atau Telegram Web
            if (isEmulator() || isTelegramWeb()) {
                document.body.innerHTML = '<div style="text-align: center; padding: 50px; color: white;"><h1>Akses Ditolak</h1><p>Emulator dan Telegram Web tidak diizinkan mengakses halaman ini.</p></div>';
                return;
            }

            // Load data jika semua pengecekan lolos
            loadData();
        }

        // Jalankan inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
